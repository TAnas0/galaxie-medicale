---
const brandColor = 'bg-blue-500';
---

<div id="typing-dots" class="flex gap-1 items-center">
  <span class={`dot w-2 h-2 rounded-full ${brandColor} opacity-0 translate-x-64 transition-all animate-bounce [animation-delay:0s] duration-700 ease-out`}></span>
  <span class={`dot w-2 h-2 rounded-full ${brandColor} opacity-0 translate-x-64 transition-all animate-bounce [animation-delay:0.2s] duration-700 ease-out`}></span>
  <span class={`dot w-2 h-2 rounded-full ${brandColor} opacity-0 translate-x-64 transition-all animate-bounce [animation-delay:0.4s] duration-700 ease-out`}></span>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const container = document.getElementById('typing-dots');
    const dots = container.querySelectorAll('.dot');

    const observer = new IntersectionObserver(
      (entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            dots.forEach((dot, index) => {
              setTimeout(() => {
                dot.classList.remove('opacity-0', 'translate-x-64');
                dot.classList.add('opacity-100', 'translate-x-0');
              }, index * 300); // 300ms stagger
            });
            observer.unobserve(entry.target);
          }
        });
      },
      { threshold: 1 }
    );

    if (container) observer.observe(container);
  });
</script>
